import{$ as d,a0 as c,a1 as y,a2 as w,a3 as R,_ as g,f as _,a4 as h,a5 as q,A as v,r as i,o as S,i as b,w as D,b as x,m as A,a6 as I}from"./index-C2nmCatd.js";import{v as s}from"./validation-D2voD8Jn.js";function O({crudOptions:a}){return{crudOptions:{request:{transformQuery:({page:e,form:o,sort:t})=>{const f=t==null?{}:{orderProp:t.prop,orderAsc:t.asc};return{pageNum:e.currentPage,pageSize:e.pageSize,employeesBo:{...o},...f}},transformRes:({res:e})=>({total:e.total,records:e.rows}),pageRequest:async e=>await c("/employees/listPages",e),addRequest:async({form:e})=>{const t={employeeid:await w.register(e),date:new Date().toISOString().split("T")[0],status:"present"};return await R("/attendance/add",t)},editRequest:async({form:e,row:o})=>(e.id=o.id,await c("/employees/addOrUpdate",e)),delRequest:async({row:e})=>await y("/employees/delete",{id:e.id})},pagination:{pageSize:10,pageNum:1},columns:{id:{column:{show:!1},title:"ID",key:"id",type:"number",form:{show:!1},viewForm:{show:!0}},name:{column:{align:"center"},title:"姓名",type:"text",form:{title:"用户名",rules:s.usernameRule()},editForm:{show:!1}},age:{title:"年龄",type:"number",form:{rules:s.ageRule()}},sex:{title:"性别",type:"dict-select",dict:d({data:[{value:1,label:"男"},{value:0,label:"女"}]}),form:{rules:s.required}},password:{column:{show:!1},type:"password",form:{title:"注册密码",rules:s.passwordRule()},editForm:{show:!1}},role:{title:"权限",type:"dict-select",dict:d({data:[{value:"USER",label:"普通员工"},{value:"ADMIN",label:"管理员"}]}),form:{title:"注册权限",rules:s.required}},createdAt:{title:"加入时间",type:"date",search:{title:"时间",show:!0,component:{type:"datetimerange"}},form:{show:!0,value:new Date().toISOString(),component:{valueFormat:"YYYY-MM-DD"}}}}}}}const B=_({name:"EmployeeCrud",setup(){const{crudRef:a,crudBinding:n,crudExpose:r}=h({createCrudOptions:O}),u=I();return q(u,()=>{r.doRefresh()}),v(()=>{r.doRefresh()}),{crudBinding:n,crudRef:a}}});function C(a,n,r,u,p,m){const l=i("fs-crud"),e=i("fs-page");return S(),b(e,null,{default:D(()=>[x(l,A({ref:"crudRef"},a.crudBinding),null,16)]),_:1})}const E=g(B,[["render",C]]);export{E as default};
