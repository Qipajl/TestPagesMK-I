import{$ as d,a0 as l,a1 as h,a3 as y,a7 as i,_ as g,f as q,a4 as R,a5 as _,A as I,r as p,o as v,i as D,w as Y,b,m as P,a6 as k}from"./index-C2nmCatd.js";import{v as r}from"./validation-D2voD8Jn.js";function F({crudOptions:s}){return{crudOptions:{request:{transformQuery:({page:e,form:t,sort:n})=>{const w=n==null?{}:{orderProp:n.prop,orderAsc:n.asc};return{pageNum:e.currentPage,pageSize:e.pageSize,productsBo:{...t},...w}},transformRes:({res:e})=>({total:e.total,records:e.rows}),pageRequest:async e=>await l("/products/listPages",e),addRequest:async({form:e})=>await y("/products/add",e),editRequest:async({form:e,row:t})=>(e.productId=t.productId,await l("/products/addOrUpdate",e)),delRequest:async({row:e})=>await h("/products/delete",{id:e.productId})},pagination:{pageSize:10,pageNum:1},columns:{productId:{column:{show:!1},title:"信息ID",key:"product_id",type:"number",form:{show:!1},viewForm:{show:!0}},productName:{column:{align:"center"},title:"资产名称",type:"text",search:{show:!0},form:{rules:r.required}},categoryId:{title:"种类",type:"dict-select",dict:d({value:"categoryId",label:"categoryName",url:"/categories/list",getData:async e=>{try{return(await i(e.url)).data}catch(t){return console.error("获取字典数据失败:",t),[]}}}),form:{show:!0,rules:r.required}},supplierId:{title:"采购商",type:"dict-select",dict:d({value:"supplierId",label:"supplierName",url:"/suppliers/list",getData:async e=>{try{return(await i(e.url)).data}catch(t){return console.error("获取字典数据失败:",t),[]}}}),form:{show:!0,rules:r.required}},unitPrice:{title:"单价",type:"number",form:{show:!0,rules:r.required}},stockQuantity:{title:"库存数量",type:"number",form:{show:!0,rules:r.required},editForm:{show:!1},addForm:{show:!1}},minimumStock:{column:{show:!1},title:"最低库存",type:"number",form:{show:!1,rules:r.required}},createdAt:{title:"创建日期",type:"date",search:{title:"时间",show:!0,component:{type:"datetimerange"}},form:{show:!0,rules:r.required,component:{valueFormat:"YYYY-MM-DD"},value:new Date().toISOString()},editForm:{show:!1}},updatedAt:{title:"更新时间",type:"date",form:{show:!1,component:{valueFormat:"YYYY-MM-DD"}}}}}}}const N=q({name:"ProductCrud",setup(){const{crudRef:s,crudBinding:a,crudExpose:o}=R({createCrudOptions:F}),u=k();return _(u,()=>{o.doRefresh()}),I(()=>{o.doRefresh()}),{crudBinding:a,crudRef:s}}});function S(s,a,o,u,m,f){const c=p("fs-crud"),e=p("fs-page");return v(),D(e,null,{default:Y(()=>[b(c,P({ref:"crudRef"},s.crudBinding),null,16)]),_:1})}const B=g(N,[["render",S]]);export{B as default};
