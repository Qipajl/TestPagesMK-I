import{$ as u,a0 as l,a1 as f,a3 as w,a7 as R,_ as g,f as h,a4 as y,a5 as _,A as q,r as i,o as b,i as v,w as k,b as A,m as B,a6 as C}from"./index-C2nmCatd.js";function $({crudOptions:s}){return{crudOptions:{request:{transformQuery:({page:e,form:t,sort:a})=>{const c=a==null?{}:{orderProp:a.prop,orderAsc:a.asc};return{pageNum:e.currentPage,pageSize:e.pageSize,attendanceBo:{...t},...c}},transformRes:({res:e})=>({total:e.total,records:e.rows}),pageRequest:async e=>await l("/attendance/listPages",e),addRequest:async({form:e})=>{const{employeeid:t,...a}=e,c={employeeId:t,...a};return await w("/attendance/add",c)},editRequest:async({form:e,row:t})=>(e.id=t.id,console.log("editRequest:",e),await l("/attendance/addOrUpdate",e)),delRequest:async({row:e})=>await f("/attendance/delete",{id:e.id})},actionbar:{buttons:{add:{show:!1}}},pagination:{pageSize:10,pageNum:1},rowHandle:{width:125,buttons:{remove:{show:!1}}},columns:{id:{column:{show:!1},title:"ID",key:"id",type:"number",form:{show:!1},viewForm:{show:!0}},employeeid:{column:{align:"center"},title:"员工",type:"dict-select",search:{show:!0},editForm:{show:!1},dict:u({value:"id",label:"name",url:"/employees/list",getData:async e=>{try{return(await R(e.url)).data}catch(t){return console.error("获取字典数据失败:",t),[]}}})},status:{column:{width:80,align:"center"},title:"状态",type:"dict-select",dict:u({data:[{value:"present",label:"出勤"},{value:"absent",label:"缺勤"},{value:"leave",label:"请假"}]})},date:{title:"日期",type:"date",editForm:{show:!1}},checkintime:{title:"开始时间",type:"time"},checkouttime:{title:"结束时间",type:"time"}}}}}const x=h({name:"AttendanceCrud",setup(){const{crudRef:s,crudBinding:r,crudExpose:n}=y({createCrudOptions:$}),o=C();return _(o,()=>{n.doRefresh()}),q(()=>{n.doRefresh()}),{crudBinding:r,crudRef:s}}});function F(s,r,n,o,p,m){const d=i("fs-crud"),e=i("fs-page");return b(),v(e,null,{default:k(()=>[A(d,B({ref:"crudRef"},s.crudBinding),null,16)]),_:1})}const P=g(x,[["render",F]]);export{P as default};
